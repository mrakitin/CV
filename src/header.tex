% CV of Max Rakitin
\documentclass[11pt,letterpaper,sans]{moderncv}

% moderncv themes
\moderncvstyle{casual}  % style options: 'casual' (default), 'classic', 'banking', 'oldstyle' and 'fancy'
\moderncvcolor{blue}    % color options: 'black', 'blue' (default), 'burgundy', 'green', 'grey', 'orange', 'purple' and 'red'

% character encoding
\usepackage[utf8]{inputenc}

% adjust the page margins
\usepackage[scale=0.8]{geometry}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{fontawesome5}
\setlength{\hintscolumnwidth}{0.16\textwidth}

\usepackage{url}
\usepackage{hyperref}
\usepackage{lastpage}

\pagestyle{fancy}
\fancyhf{}
\rhead{Max Rakitin, Ph.D.}
\lhead{\titlename}
\rfoot{Page \thepage / \pageref{LastPage}}
\lfoot{\vspace{-0.67cm}{\scriptsize \textcolor{gray}{Last updated:}} \\ \today}
\setlength{\footskip}{-10pt}

% personal data
\firstname{Max}
\familyname{Rakitin}
\title{\titlename}
\address{NSLS-II}{Brookhaven National Laboratory}{Upton, NY 11973}
\email{mrakitin@bnl.gov}
\social[github]{mrakitin}
\social[linkedin]{mrakitin}

\makeatletter
% to show numerical labels in the bibliography:
\renewcommand*{\bibliographyitemlabel}{\@biblabel{\arabic{enumiv}}}
% Organize publication numbering in the reverse order. Solutions from:
% - https://tex.stackexchange.com/a/22770
% - https://tex.stackexchange.com/a/163455
% - https://www.ctan.org/pkg/totcount
\usepackage{totcount}
\newtotcounter{citnum}
\def\oldbibitem{} \let\oldbibitem=\bibitem
\def\bibitem{\stepcounter{citnum}\oldbibitem}
\renewcommand*{\@biblabel}[1]{
    \number\numexpr\totvalue{citnum} + 1 - #1.
}

\makeatother

% Define shortcuts for multiple-used links:
% Conferences:
\newcommand{\www}{\includegraphics[scale=0.05]{images/link.png}}
\newcommand{\pdf}{\includegraphics[scale=0.13]{images/book.png}}

% Logos:
\newcommand{\logoBNL}{\includegraphics[scale=0.13]{images/logo_BNL.png}}
\newcommand{\logoSBU}{\includegraphics[scale=0.4]{images/logo_SBU.png}}
\newcommand{\logoUSPEX}{\includegraphics[scale=0.20]{images/logo_USPEX.png}}
\newcommand{\logoSUSU}{\includegraphics[scale=0.2]{images/logo_SUSU.png}}
\newcommand{\logoAT}{\includegraphics[scale=0.36]{images/logo_AT.png}}
\newcommand{\logoRocket}{\includegraphics[scale=0.21]{images/logo_Rocket.png}}
\newcommand{\logoRadiaSoft}{\includegraphics[scale=0.17]{images/logo_RadiaSoft.png}}
\newcommand{\logoUCF}{\includegraphics[scale=0.3]{images/logo_UCF.png}}
\newcommand{\logoUNLV}{\includegraphics[scale=0.22]{images/logo_UNLV.png}}

% Decorate links:
\definecolor{linkcolor}{HTML}{2A5DB0}  % from https://gigaom.com/2009/07/09/when-it-comes-to-links-color-matters/
\newcommand{\colorify}[1]{\textcolor{linkcolor}{#1}}
\newcommand{\mylink}[1]{\href{#1}{\colorify{#1}}}          % just link
\newcommand{\mylinkn}[2]{\href{#1}{\colorify{#2}}}         % colored named link
\newcommand{\mylinkb}[2]{\href{#1}{#2}}                    % non-colored named link
\newcommand{\mylinkm}[1]{\href{mailto:#1}{\colorify{#1}}}  % email link

% Bib file:
\def\bibfile{RakitinM_pubs}
